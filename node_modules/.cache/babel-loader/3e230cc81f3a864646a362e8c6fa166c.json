{"ast":null,"code":"import _toConsumableArray from \"/Users/Petito/ReactNativeProjects/GetirCase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/Petito/ReactNativeProjects/GetirCase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/Petito/ReactNativeProjects/GetirCase/src/components/TagCheckList.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from 'react';\nimport { Checkbox, Table, TableBody, TableCell, TableContainer, TableRow, TextField } from '@mui/material';\nimport items from '../data/items';\nimport linq from 'linq';\nimport * as productActions from \"../store/actions/product.actions\";\nimport { connect } from \"react-redux\";\nimport Enumerable from 'linq';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TagCheckList(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState([0]),\n      _useState2 = _slicedToArray(_useState, 2),\n      checked = _useState2[0],\n      setChecked = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoaded = _useState4[0],\n      setIsLoaded = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tags = _useState6[0],\n      setTags = _useState6[1];\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      query = _React$useState2[0],\n      setQuery = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      autoFocusStatus = _React$useState4[0],\n      setAutoFocusStatus = _React$useState4[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      products = _useState8[0],\n      setProducts = _useState8[1];\n\n  var handleToggle = function handleToggle(value) {\n    return function () {\n      var currentIndex = checked.indexOf(value);\n\n      var newChecked = _toConsumableArray(checked);\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n      var newList = [];\n\n      if (Enumerable.from(newChecked).toArray().length > 1) {\n        newList = linq.from(JSON.parse(localStorage.getItem(\"@products\"))).where(function (x) {\n          return Enumerable.from(newChecked).select(function (element) {\n            return element;\n          }).contains(Enumerable.from(x.tags).forEach(function (y) {\n            return y;\n          }));\n        }).toArray();\n      } else {\n        newList = linq.from(JSON.parse(localStorage.getItem(\"@products\"))).toArray();\n      }\n\n      console.log(\"newchecked: \", Enumerable.from(newChecked).toArray().length);\n      console.log(\"brand tarafinda checkledim\", products);\n      props.onRefreshUsageProducts(newList);\n    };\n  };\n\n  var handleChange = function handleChange(event) {\n    var formattedQuery = event.target.value.toLowerCase();\n\n    if (event.target.value === null || event.target.value === \"\") {\n      linq.from(items).forEach(function (item) {\n        linq.from(item.tags).forEach(function (tag) {\n          tagList.push(tag);\n        });\n      });\n      setTags(tagList);\n    } else {\n      var filteredData = tags.filter(function (x) {\n        return x.toLowerCase().includes(formattedQuery);\n      });\n      console.log(\"filteredData: \", filteredData);\n      setTags(filteredData);\n    }\n\n    setQuery(event.target.value);\n  };\n\n  var list = [];\n  var tagList = [];\n  var id = 0;\n  useEffect(function () {\n    if (!isLoaded) {\n      setIsLoaded(true);\n      linq.from(items).forEach(function (item) {\n        linq.from(item.tags).toArray().map(function (item) {\n          var mappedItem = {\n            tagId: id + 1,\n            tag: item\n          };\n          list.push(mappedItem);\n        });\n      });\n      tagList = linq.from(list).groupBy(function (g) {\n        return g.tag;\n      }, function (element) {\n        return element;\n      }, function (key, items) {\n        return {\n          key: key,\n          items: items.toArray(),\n          count: items.toArray().length\n        };\n      }).toArray();\n      setTags(tagList);\n    }\n\n    if (props.refresh === true) {\n      setProducts(props.products);\n    }\n\n    if (props.loaded === true) {\n      props.onGetProductsReset();\n      console.log('buraya geliyor mu');\n      setProducts(props.products);\n    }\n  }, [isLoaded, tagList]);\n  return /*#__PURE__*/_jsxDEV(TableContainer, {\n    sx: {\n      maxHeight: 240\n    },\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      id: \"standard-search\",\n      label: \"Search...\",\n      onChange: handleChange,\n      type: \"search\",\n      variant: \"standard\",\n      className: \"px-3 justify-content-between\",\n      color: \"secondary\",\n      value: query,\n      onFocus: function onFocus() {\n        return setAutoFocusStatus(true);\n      },\n      autoFocus: autoFocusStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      stickyHeader: true,\n      \"aria-label\": \"sticky table\",\n      children: /*#__PURE__*/_jsxDEV(TableBody, {\n        children: tags.map(function (tag) {\n          var labelId = \"checkbox-list-label-\".concat(tag);\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            hover: true,\n            role: \"checkbox\",\n            tabIndex: -1,\n            onClick: handleToggle(tag.key),\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                maxWidth: 15\n              },\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                color: \"secondary\",\n                edge: \"start\",\n                checked: checked.indexOf(tag) !== -1,\n                tabIndex: -1,\n                disableRipple: true,\n                inputProps: {\n                  'aria-labelledby': labelId\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 29\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 27\n            }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [tag.key, \" (\", tag.count, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, _this)]\n          }, tag.items[0].tagId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TagCheckList, \"i0D5o77wAbuUd18Ab6M7CbJEXwM=\");\n\n_c = TagCheckList;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    errors: state.product.errors,\n    loading: state.product.loading,\n    products: state.product.products,\n    refresh: state.product.refresh,\n    loaded: state.product.loaded\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onRefreshUsageProducts: function onRefreshUsageProducts(products) {\n      return dispatch(productActions.refreshUsageProducts(products));\n    },\n    onRefreshUsageProductsReset: function onRefreshUsageProductsReset() {\n      return dispatch(productActions.refreshUsageProductsReset());\n    },\n    onGetProductsReset: function onGetProductsReset() {\n      return dispatch(productActions.getProductsReset());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TagCheckList);\n\nvar _c;\n\n$RefreshReg$(_c, \"TagCheckList\");","map":{"version":3,"sources":["/Users/Petito/ReactNativeProjects/GetirCase/src/components/TagCheckList.js"],"names":["React","useState","useEffect","Checkbox","Table","TableBody","TableCell","TableContainer","TableRow","TextField","items","linq","productActions","connect","Enumerable","TagCheckList","props","checked","setChecked","isLoaded","setIsLoaded","tags","setTags","query","setQuery","autoFocusStatus","setAutoFocusStatus","products","setProducts","handleToggle","value","currentIndex","indexOf","newChecked","push","splice","newList","from","toArray","length","JSON","parse","localStorage","getItem","where","x","select","element","contains","forEach","y","console","log","onRefreshUsageProducts","handleChange","event","formattedQuery","target","toLowerCase","item","tag","tagList","filteredData","filter","includes","list","id","map","mappedItem","tagId","groupBy","g","key","count","refresh","loaded","onGetProductsReset","maxHeight","labelId","maxWidth","mapStateToProps","state","errors","product","loading","mapDispatchToProps","dispatch","refreshUsageProducts","onRefreshUsageProductsReset","refreshUsageProductsReset","getProductsReset"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Checkbox,Table,TableBody,TableCell,TableContainer,TableRow,TextField} from '@mui/material';\r\nimport items from '../data/items'\r\nimport linq from 'linq';\r\nimport * as productActions from \"../store/actions/product.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Enumerable from 'linq';\r\n\r\nfunction TagCheckList(props) {\r\n  const [checked, setChecked] = useState([0]);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [tags, setTags] = useState([]);\r\n  const [query, setQuery] = React.useState(\"\");\r\n  const [autoFocusStatus, setAutoFocusStatus] = React.useState(false);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const handleToggle = (value) => () => {\r\n    const currentIndex = checked.indexOf(value);\r\n    const newChecked = [...checked];\r\n    \r\n    if (currentIndex === -1) {\r\n      newChecked.push(value);\r\n    } else {\r\n      newChecked.splice(currentIndex, 1);\r\n    }\r\n    setChecked(newChecked);\r\n    let newList = [];\r\n    if (Enumerable.from(newChecked).toArray().length > 1) {\r\n      newList = linq.from(JSON.parse(localStorage.getItem(\"@products\"))).where(\r\n        x => Enumerable.from(newChecked).select(element => element).contains(Enumerable.from(x.tags).forEach(y => y))).toArray();\r\n    } else {\r\n      newList = linq.from(JSON.parse(localStorage.getItem(\"@products\"))).toArray();\r\n    }\r\n    console.log(\"newchecked: \", Enumerable.from(newChecked).toArray().length);\r\n    console.log(\"brand tarafinda checkledim\",products);\r\n    props.onRefreshUsageProducts(newList);\r\n  };\r\n  const handleChange = (event) => {\r\n    const formattedQuery = event.target.value.toLowerCase();\r\n    if (event.target.value === null || event.target.value === \"\") {\r\n      linq.from(items).forEach(item => {\r\n        linq.from(item.tags).forEach( tag =>{\r\n            tagList.push(tag);\r\n        })});\r\n        setTags(tagList);\r\n    } else {\r\n      const filteredData = tags.filter(x => x.toLowerCase().includes(formattedQuery));\r\n      console.log(\"filteredData: \",filteredData)\r\n      setTags(filteredData);\r\n    }\r\n    setQuery(event.target.value);\r\n  }\r\n  let list = [];\r\n  let tagList = [];\r\n  let id = 0;\r\n  useEffect(() => {\r\n    if (!isLoaded) {\r\n      setIsLoaded(true);\r\n      linq.from(items).forEach(item => {\r\n        linq.from(item.tags).toArray().map(\r\n          function(item) {\r\n            const mappedItem = {\r\n              tagId: id +1,\r\n              tag: item,\r\n            };\r\n            list.push(mappedItem);\r\n          });\r\n      });\r\n        tagList = linq.from(list).groupBy(\r\n            g => g.tag, \r\n            element => element, \r\n            (key, items) => ({key, items: items.toArray(), count: items.toArray().length})).toArray();\r\n        setTags(tagList);\r\n    }\r\n    if (props.refresh === true) {\r\n      setProducts(props.products);\r\n    }\r\n    if (props.loaded === true) {\r\n      props.onGetProductsReset();\r\n      console.log('buraya geliyor mu')\r\n      setProducts(props.products);\r\n    }\r\n  }, [isLoaded, tagList])\r\n  \r\n  return (\r\n    <TableContainer sx={{ maxHeight: 240 }}>\r\n      <TextField\r\n                    id=\"standard-search\"\r\n                    label=\"Search...\"\r\n                    onChange={handleChange}\r\n                    type=\"search\"\r\n                    variant=\"standard\"\r\n                    className=\"px-3 justify-content-between\"\r\n                    color=\"secondary\"\r\n                    value={query}\r\n                    onFocus={() => setAutoFocusStatus(true)}\r\n                    autoFocus={autoFocusStatus}\r\n              />\r\n    <Table stickyHeader aria-label=\"sticky table\">\r\n      <TableBody>\r\n        {\r\n          tags.map((tag) =>{\r\n          const labelId = `checkbox-list-label-${tag}`;\r\n                      return (\r\n                        <TableRow hover key={tag.items[0].tagId} role=\"checkbox\" tabIndex={-1} onClick={handleToggle(tag.key)}>\r\n                          <TableCell sx={{maxWidth: 15}}>\r\n                            <Checkbox\r\n                              color=\"secondary\"\r\n                              edge=\"start\"\r\n                              checked={checked.indexOf(tag) !== -1}\r\n                              tabIndex={-1}\r\n                              disableRipple\r\n                              inputProps={{ 'aria-labelledby': labelId }}\r\n                            />\r\n                          </TableCell>\r\n                            <TableCell>\r\n                              {tag.key} ({tag.count})\r\n                            </TableCell>\r\n                        </TableRow>\r\n                      );}       \r\n                )\r\n        }\r\n      </TableBody>\r\n    </Table>\r\n  </TableContainer>\r\n  );\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    errors: state.product.errors,\r\n    loading: state.product.loading,\r\n    products: state.product.products,\r\n    refresh: state.product.refresh,\r\n    loaded: state.product.loaded,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onRefreshUsageProducts: (products) => dispatch(productActions.refreshUsageProducts(products)),\r\n    onRefreshUsageProductsReset: () => dispatch(productActions.refreshUsageProductsReset()),\r\n    onGetProductsReset: () => dispatch(productActions.getProductsReset())\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TagCheckList);"]},"metadata":{},"sourceType":"module"}