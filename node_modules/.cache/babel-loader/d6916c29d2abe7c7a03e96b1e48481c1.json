{"ast":null,"code":"import _slicedToArray from \"/Users/Petito/ReactNativeProjects/GetirCase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/Petito/ReactNativeProjects/GetirCase/src/components/ProductList.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/* eslint-disable array-callback-return */\nimport React, { useEffect, useState } from 'react';\nimport linq from 'linq';\nimport { CCard, CCardBody, CCardText, CButton, CImg, CCardTitle } from \"@coreui/react\";\nimport { connect } from \"react-redux\";\nimport * as basketActions from \"../store/actions/basket.actions\";\nimport * as productActions from \"../store/actions/product.actions\";\nimport usePagination from \"../components/Pagination\";\nimport Pagination from '@mui/material/Pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar ProductList = function ProductList(props) {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var basketList = [];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  var PER_PAGE = 15;\n  var count = Math.ceil(products.length / PER_PAGE);\n\n  var _DATA = usePagination(products, PER_PAGE);\n\n  var handleChange = function handleChange(e, p) {\n    setPage(p);\n\n    _DATA.jump(p);\n  };\n\n  function moveToBasket(item) {\n    if (props.basket !== null) {\n      linq.from(props.basket).forEach(function (element) {\n        basketList.push(element);\n      });\n      basketList.push(item);\n    } else {\n      basketList.push(item);\n    }\n\n    props.onRefreshBasket(basketList);\n  }\n\n  useEffect(function () {\n    /* if (products.length === 0) {\r\n      setProducts(linq.from(JSON.parse(localStorage.getItem(\"@products\"))).toArray())\r\n    } */\n    if (props.refresh === true) {\n      //props.onRefreshUsageProductsReset();\n      setProducts(props.products);\n    }\n\n    if (props.loaded === true) {\n      setProducts(props.products);\n    }\n  }, [products.length, props]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [_DATA.currentData().map(function (item) {\n      return /*#__PURE__*/_jsxDEV(CCard, {\n        className: \"justify-content-between\",\n        style: {\n          width: '18rem'\n        },\n        children: [item.itemType === \"mug\" ? /*#__PURE__*/_jsxDEV(CImg, {\n          orientation: \"top\",\n          src: \"https://stampida.es/421-large_default/mug-wwf.jpg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, _this) : /*#__PURE__*/_jsxDEV(CImg, {\n          orientation: \"top\",\n          src: \"https://images.teemill.com/5ddfefff738022.89422750.png.jpg?w=640&h=auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(CCardBody, {\n          children: [/*#__PURE__*/_jsxDEV(CCardTitle, {\n            children: [item.name, \" ($\", item.price, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(CCardText, {\n            children: item.manufacturer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(CButton, {\n            onClick: function onClick() {\n              return moveToBasket(item);\n            },\n            children: \"Add to Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, _this)]\n      }, item.added, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 23\n      }, _this);\n    }), /*#__PURE__*/_jsxDEV(Pagination, {\n      className: \"py-2\",\n      count: count,\n      page: page,\n      color: \"secondary\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(ProductList, \"w/uWNO5viqj9XCaEtjYkdVfAFMU=\", false, function () {\n  return [usePagination];\n});\n\n_c = ProductList;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    basket: state.basket.basket,\n    products: state.product.products,\n    refresh: state.product.refresh,\n    loaded: state.product.loaded\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onGetProducts: function onGetProducts() {\n      return dispatch(productActions.getProducts());\n    },\n    onGetProductsReset: function onGetProductsReset() {\n      return dispatch(productActions.getProductsReset());\n    },\n    onRefreshBasket: function onRefreshBasket(basket) {\n      return dispatch(basketActions.refreshBasket(basket));\n    },\n    onRefreshUsageProductsReset: function onRefreshUsageProductsReset() {\n      return dispatch(productActions.refreshUsageProductsReset());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"sources":["/Users/Petito/ReactNativeProjects/GetirCase/src/components/ProductList.js"],"names":["React","useEffect","useState","linq","CCard","CCardBody","CCardText","CButton","CImg","CCardTitle","connect","basketActions","productActions","usePagination","Pagination","ProductList","props","products","setProducts","basketList","page","setPage","PER_PAGE","count","Math","ceil","length","_DATA","handleChange","e","p","jump","moveToBasket","item","basket","from","forEach","element","push","onRefreshBasket","refresh","loaded","currentData","map","width","itemType","name","price","manufacturer","added","mapStateToProps","state","product","mapDispatchToProps","dispatch","onGetProducts","getProducts","onGetProductsReset","getProductsReset","refreshBasket","onRefreshUsageProductsReset","refreshUsageProductsReset"],"mappings":"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","sourcesContent":["/* eslint-disable array-callback-return */\r\nimport React, {useEffect, useState} from 'react';\r\nimport linq from 'linq';\r\nimport { CCard,CCardBody, CCardText,CButton,CImg,CCardTitle } from \"@coreui/react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as basketActions from \"../store/actions/basket.actions\";\r\nimport * as productActions from \"../store/actions/product.actions\";\r\nimport usePagination from \"../components/Pagination\";\r\nimport Pagination from '@mui/material/Pagination';\r\n\r\nconst ProductList = (props) => {\r\n  const [products,setProducts] = useState([]);\r\n  \r\n  const basketList = [];\r\n\r\n  let [page, setPage] = useState(1);\r\n  const PER_PAGE = 15;\r\n\r\n  const count = Math.ceil(products.length / PER_PAGE);\r\n  const _DATA = usePagination(products, PER_PAGE);\r\n\r\n  const handleChange = (e, p) => {\r\n    setPage(p);\r\n    _DATA.jump(p);\r\n  };\r\n  \r\n  function moveToBasket(item) {\r\n    if (props.basket !== null) {\r\n      linq.from(props.basket).forEach(element => {\r\n        basketList.push(element)\r\n      })\r\n      basketList.push(item);\r\n    } else {\r\n      basketList.push(item);\r\n    }\r\n    props.onRefreshBasket(basketList);\r\n  }\r\n  useEffect(() => {\r\n    /* if (products.length === 0) {\r\n      setProducts(linq.from(JSON.parse(localStorage.getItem(\"@products\"))).toArray())\r\n    } */\r\n    if (props.refresh === true) {\r\n      //props.onRefreshUsageProductsReset();\r\n      setProducts(props.products);\r\n    }\r\n    if (props.loaded === true) {\r\n      setProducts(props.products);\r\n    }\r\n  }, [products.length, props])\r\n  return (\r\n    <>\r\n          {_DATA.currentData().map(item => {\r\n              return (<CCard key={item.added} className=\"justify-content-between\" style={{ width: '18rem' }}>\r\n              {item.itemType === \"mug\" ? (\r\n                <CImg orientation=\"top\" src=\"https://stampida.es/421-large_default/mug-wwf.jpg\" />    \r\n              ):(\r\n                <CImg orientation=\"top\" src=\"https://images.teemill.com/5ddfefff738022.89422750.png.jpg?w=640&h=auto\" />\r\n              )}\r\n              \r\n              <CCardBody>\r\n                <CCardTitle>{item.name} (${item.price})</CCardTitle>\r\n                <CCardText>\r\n                  {item.manufacturer}\r\n                </CCardText>\r\n                <CButton onClick={() => moveToBasket(item)}>Add to Cart</CButton>\r\n              </CCardBody>\r\n              </CCard>) \r\n            })}\r\n      <Pagination className=\"py-2\" count={count} page={page} color=\"secondary\" onChange={handleChange} />\r\n    </>\r\n  );\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    basket: state.basket.basket,\r\n    products: state.product.products,\r\n    refresh: state.product.refresh,\r\n    loaded: state.product.loaded,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onGetProducts: () => dispatch(productActions.getProducts()),\r\n    onGetProductsReset: () => dispatch(productActions.getProductsReset()),\r\n    onRefreshBasket: (basket) => dispatch(basketActions.refreshBasket(basket)),\r\n    onRefreshUsageProductsReset: () => dispatch(productActions.refreshUsageProductsReset()),\r\n  };\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);"]},"metadata":{},"sourceType":"module"}